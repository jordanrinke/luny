purpose: This module implements the generate command that creates .toon DOSE files for source code files. It uses a two-pass algorithm to build dependency graphs and generate comprehensive documentation.
tokens: ~7938
exports[1]: run_generate(fn)
signatures[1]:
  run_generate(fn): (args: &GenerateArgs, root: &Path, verbose: bool) Result<()>
imports[13]{from,items}: crate::cli,GenerateArgs; crate::config,Config|ThresholdMatcher; crate::exclusion,build_exclude_globset|build_walker; crate::formatter,format_toon; crate::parser,ParserFactory; crate::types,CalledByInfo|ToonData; anyhow,Context|Result; std::collections,HashMap; std,fs; std::path,Path|PathBuf; super::*,super::*; std,fs; tempfile,TempDir
calls[8]{target,methods}: std::collections,new; std::path,new|from; crate::types,new; tempfile,new().unwrap|new; crate::parser,new; crate::cli,default; crate::config,load|default; std,create_dir_all|create_dir(&node_modules).unwrap|write(temp_dir.path().join("readme.md"), "# Readme").unwrap|write(git_dir.join("config.ts"), "export const x = 1;").unwrap|write(&file_path, "export const x = 1;").unwrap|write(src_dir.join("main.ts"), "export const x = 1;").unwrap|create_dir(&git_dir).unwrap|read_to_string(path).context|write(temp_dir.path().join("main.py"), "def main(): pass").unwrap|create_dir_all(parent).context|write(target_dir.join("debug.rs"), "fn main() {}").unwrap|read_to_string(temp_dir.path().join(".ai/main.ts.toon")).unwrap|read_to_string(ai_dir.join("main.ts.toon")).unwrap|write(temp_dir.path().join("main.ts"), source).unwrap|write|read_to_string|create_dir(&src_dir).unwrap|write(ai_dir.join("main.ts.toon"), "existing content").unwrap|write(pycache_dir.join("cached.py"), "def foo(): pass").unwrap|create_dir(&target_dir).unwrap|write(&toon_path, &content).context|remove_dir_all(&ai_dir).context|write(temp_dir.path().join("main.ts"), "export const x = 1;").unwrap|write(temp_dir.path().join("utils.py"), "def foo(): pass").unwrap|create_dir|write(node_modules.join("package.ts"), "export const x = 1;").unwrap|write(&main_path, "import { foo } from './utils';").unwrap|create_dir(&ai_dir).unwrap|write(&utils_path, "export function foo() {}").unwrap|write(ai_dir.join("deleted.ts.toon"), "stale content").unwrap|remove_dir_all|create_dir(&pycache_dir).unwrap|write(temp_dir.path().join("main.ts"), "export const y = 2;").unwrap|write(lib_dir.join("utils.ts"), "export const y = 2;").unwrap|write(temp_dir.path().join("main.rs"), "fn main() {}").unwrap|create_dir(&lib_dir).unwrap
